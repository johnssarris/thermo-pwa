<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="manifest" href="./manifest.json">
<title>Thermostat</title>
<style>
html,body{-webkit-user-select:none;-webkit-touch-callout:none;overscroll-behavior:none;margin:0;height:100%;overflow:hidden;
background:#0e1217;color:#e6e9ed;font-family:-apple-system,system-ui,"SF Pro Text","Helvetica Neue",Arial,sans-serif;}
.card{width:min(420px,92vw);margin:0 auto;margin-top:10vh;background:rgba(255,255,255,.05);border-radius:18px;
padding:16px;box-shadow:0 12px 28px rgba(0,0,0,.35);backdrop-filter:blur(12px) saturate(1.05);
-webkit-backdrop-filter:blur(12px) saturate(1.05);}
.title{font-weight:700;font-size:15px;letter-spacing:.4px;color:#9aa0a6;text-align:center;}
.temp{font-size:56px;font-weight:800;text-align:center;line-height:1;margin:10px 0;}
.btn{min-width:72px;background:#26303a;color:#e6e9ed;border:none;border-radius:14px;padding:18px 22px;font-size:16px;
font-weight:700;margin:6px;transition:background .2s,transform .05s;}
.btn:active{transform:scale(.97);}
.hint{text-align:center;color:#9aa0a6;font-size:12px;margin-top:14px;}
.row{text-align:center;}
</style>
</head>
<body>
  <div class="card">
    <div class="title">THERMOSTAT</div>
    <div id="temp" class="temp">72°</div>
    <div class="row">
      <button id="btn-up" class="btn">▲ +1°</button>
      <button id="btn-down" class="btn">▼ −1°</button>
    </div>
    <div class="hint">Swipe up to close</div>
  </div>

<script>
let temp=72;const el=document.getElementById('temp');
function render(){el.textContent=temp+'°';localStorage.setItem('temp',temp);}
function changeTemp(d){temp=Math.max(40,Math.min(90,temp+d));render();}
const saved=parseInt(localStorage.getItem('temp'),10);if(!isNaN(saved))temp=saved;render();

function setupHold(selector,delta){
 const el=document.querySelector(selector);let holdTimer,repeatTimer,accelTimer;
 const start=(e)=>{
   e.preventDefault();changeTemp(delta);
   holdTimer=setTimeout(()=>{
     repeatTimer=setInterval(()=>changeTemp(delta),120);
     accelTimer=setTimeout(()=>{clearInterval(repeatTimer);
       repeatTimer=setInterval(()=>changeTemp(delta),60);},1000);
   },380);
 };
 const stop=()=>{clearTimeout(holdTimer);clearTimeout(accelTimer);clearInterval(repeatTimer);};
 el.addEventListener('pointerdown',start,{passive:false});
 ['pointerup','pointerleave','pointercancel'].forEach(v=>el.addEventListener(v,stop));
 document.addEventListener('visibilitychange',()=>{if(document.hidden)stop();});
 window.addEventListener('blur',stop);
}
setupHold('#btn-up',+1);
setupHold('#btn-down',-1);
</script>
</body>
</html>
